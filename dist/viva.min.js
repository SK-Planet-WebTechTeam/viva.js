!function(a,b){var c="ontouchstart"in a,d=c?"touchstart":"mousedown",e=c?"touchmove":"mousemove",f=c?"touchend":"mouseup",g=Date.now;a.raf=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}();var h=a.viva={},i=function(a,b){this.x=a||0,this.y=b||0};i.prototype.add=function(){for(var a=0;a<arguments.length;a++)this.x+=arguments[a].x,this.y+=arguments[a].y;return this},i.prototype.sub=function(){for(var a=0;a<arguments.length;a++)this.x-=arguments[a].x,this.y-=arguments[a].y;return this},i.prototype.scale=function(a){return this.x*=a,this.y*=a,this},i.prototype.dot=function(a){return this.x*a.x+this.y*a.y},i.prototype.cross=function(a){return this.x*a.y-this.y*a.x},i.prototype.mult=function(a){return this.x*=a.x,this.y*=a.y,this},i.prototype.projection=function(a){var b=this.dot(a),c=a.magnitude(),d=h.vector.copy(a);return d.scale(b/(c*c)),d},i.prototype.angleBetween=function(a){return this.isZero()||a.isZero()?0:Math.acos(this.dot(a)/(this.magnitude()*a.magnitude()))},i.prototype.normalize=function(){return this.scale(1/this.magnitude()),this},i.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.x,e=this.y;return this.x=b*d-c*e,this.y=c*d+b*e,this},i.prototype.reset=function(){return this.x=0,this.y=0,this},i.prototype.set=function(a,c){return a===b&&c===b?this:(a.constructor===i&&(c=a.y,a=a.x),this.x=a||0,this.y=c||0,this)},i.prototype.isEqual=function(a){return this.x===a.x&&this.y===a.y},i.prototype.isZero=function(){return 0===this.x&&0===this.y},i.prototype.print=function(a){return(a?a+" :: ":"")+"{ x: "+this.x+", y: "+this.y+"}"},i.prototype.clone=function(){return h.vector.copy(this)};var j=[],k={initvectorPool:function(){var a,b;for(b=0;16>b;b++)a=j.push(new i)},expandvectorPool:function(){var a,b=200;for(a=j.length;b>a;a++)j.push(new i)},create:function(a,b){return 0===j.length&&k.expandvectorPool(),l++,j.pop().set(a,b)},release:function(a){j.push(a),l--,a.reset()},releaseAll:function(a){var b;a.length;for(var c=0;c<a.length;c++)b=a[c],b&&(j.push(b),l--,b.reset())},copy:function(a){return 0===j.length&&k.expandvectorPool(),l++,j.pop().set(a.x,a.y)}};h.vector=k,h.vector.initvectorPool();var l=a.vectorcnt=0,m=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.left=a,this.top=b,this.right=a+c,this.bottom=b+d};m.prototype.overlap=function(a){return(this.right>=a.left&&this.right<=a.right||a.right>=this.left&&a.right<=this.right)&&(this.bottom>=a.top&&this.bottom<=a.bottom||a.bottom>=this.top&&a.bottom<=this.bottom)},m.prototype.set=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.left=a,this.top=b,this.right=a+c,this.bottom=b+d},m.prototype.contains=function(a){return this.left<=a.left&&this.right>=a.right&&this.top<=a.top&&this.bottom>=a.bottom},h.AABB=m;var n=function(a,b){this.acceleration=h.vector.create(a,b)};n.prototype.behave=function(a){a.status===t.NORMAL&&a.accelerate(h.vector.copy(this.acceleration))};var o=function(a){this.boundary={top:a.y,left:a.x,bottom:a.y+a.height,right:a.x+a.width},this.cor=a.cor||1};o.prototype.behave=function(a){var b=this._norm(a),c=a.velocity.clone(),d=-(1+a.cor*this.cor)*c.dot(b),e=b.clone().scale(d);b.isZero()||(a.velocity.add(e),e.magnitude()<20&&a._adjustPosition()),h.vector.releaseAll([c,e])},o.prototype._norm=function(a){var b=this._checkCollisionType(a);return this._norms[b]},o.prototype._checkCollisionType=function(a){var b=a.position.x,c=a.position.y,d=a.radius||a.width/2,e=a.radius||a.height/2;return b+d>=this.boundary.right&&a.velocity.x>0?"right":b-d<=this.boundary.left&&a.velocity.x<0?"left":c+e>=this.boundary.bottom&&a.velocity.y>0?"bottom":c-e<=this.boundary.top&&a.velocity.y<0?"top":"zero"},o.prototype._norms={top:h.vector.create(0,-1),left:h.vector.create(-1,0),bottom:h.vector.create(0,-1),right:h.vector.create(-1,0),zero:h.vector.create(0,0)};var p=function(){this.collisions=[]};p.prototype.behave=function(a){this._detect(a),this._collisionResponse()},p.prototype._detect=function(a){var b,c,d=a.world.quadtree.retrieve(a),e=d.length,f=0;for(f=0;e>f;f++)b=d[f],a!==b&&(c=this._checkCollision(a,b),c&&!this._hasCollision(c)&&this.collisions.push(c))},p.prototype._collisionResponse=function(){var a=this.collisions.length,b=0;for(b=0;a>b;b++)this._collide(this.collisions.pop())},p.prototype._hasCollision=function(a){return this.collisions.some(function(b){return b.bodyA===a.bodyA&&b.bodyB===a.bodyB||b.bodyB===a.bodyA&&b.bodyA===a.bodyB})},p.prototype._checkCollision=function(a,b){var c,d,e=a.position,f=h.vector.copy(b.position);if("circle"===a.type&&"circle"===b.type&&f.sub(e).magnitude()<=a.radius+b.radius){if(d=h.vector.copy(f),0===f.magnitude())return;c={bodyA:a,bodyB:b,point:d.scale(a.radius/f.magnitude()).add(e)}}if(("rectangle"===a.type||"rectangle"===b.type)&&a.aabb.overlap(b.aabb)){if(d=h.vector.copy(f),0===f.magnitude())return;c={bodyA:a,bodyB:b,point:d.scale(a.aabb.width/2/f.magnitude()).add(e)}}return h.vector.release(f),c},p.prototype._collide=function(a){var b,c,d,e,f,g,i=a.bodyA,j=a.bodyB,k=a.point,l=h.vector.copy(i.velocity).sub(j.velocity),m=l.clone(),n=i.mass,o=j.mass,p=h.vector.copy(k).sub(i.position),q=h.vector.copy(k).sub(j.position),r=h.vector.copy(i.position).sub(j.position),s=r.scale(1/r.magnitude()),t=l.projection(s),u=l.sub(t),v=i.cor*j.cor,w=i.cof*j.cof,x=n*p.magnitude()*p.magnitude()/2,y=o*q.magnitude()*q.magnitude()/2,z=h.vector.copy(p),A=h.vector.copy(q),B=h.vector.copy(p),C=h.vector.copy(q),D=z.scale(z.cross(s)/x),E=A.scale(A.cross(s)/y),F=h.vector.copy(s),G=-(1+v)*t.magnitude()/(s.dot(s)*(1/n+1/o)+F.dot(D.add(E))),H=h.vector.copy(s).scale(G),I=h.vector.copy(s).scale(G),J=p.scale(1/x).cross(H),K=q.scale(1/y).cross(I);m.dot(s)<0&&(i.velocity.sub(H.scale(1/n)),j.velocity.add(I.scale(1/o)),i.angularVelocity-=J,j.angularVelocity+=K,c=u.clone().scale(-1/u.magnitude()),b=u.magnitude()>w*G?-w*G:-u.magnitude(),0===u.magnitude()&&c.reset(),b/=1/n+1/o+s.dot(B.scale(B.cross(c)/x))+s.dot(C.scale(C.cross(c)/y)),d=c.clone().scale(b),e=c.clone().scale(b),f=p.cross(d),g=q.cross(e),i.velocity.sub(d.scale(1/n)),j.velocity.add(e.scale(1/o)),i.angularVelocity-=f,j.angularVelocity+=g),h.vector.releaseAll([l,p,q,r,t,z,A,B,C,F,H,I,k,m]),h.vector.releaseAll([c,d,e]),this._adjustBodyPosition(a)},p.prototype._adjustBodyPosition=function(a){var b=a.bodyA,c=a.bodyB,d=h.vector.copy(b.position),e=h.vector.copy(c.position),f=e.sub(d),g=b.radius+c.radius-f.magnitude(),i=b.radius/(b.radius+c.radius),j=c.radius/(b.radius+c.radius);b._adjustPosition(),c._adjustPosition(),"circle"===b.type&&"circle"===c.type&&g>0&&(f.normalize().scale(g),b.position.x<c.position.x?(b.position.x-=f.x*i,c.position.x+=f.x*j):(b.position.x+=f.x*i,c.position.x-=f.x*j),b.position.y<c.position.y?(b.position.y-=f.y*i,c.position.y+=f.y*j):(b.position.y+=f.y*i,c.position.y-=f.y*j)),h.vector.release(d),h.vector.release(e)};var q={ConstantAcceleration:function(a,b){return new n(a,b)},BoundaryCollision:function(a){return new o(a)},Collision:function(){return new p}};h.behavior=q;var r=[],s={initPool:function(){var a;for(a=0;16>a;a++)r.push(new u({x:-1e3,y:-1e3}))},expandPool:function(){var a,b=32;for(a=r.length;b>a;a++)r.push(new u({x:-1e3,y:-1e3}))},create:function(a,b){return 0===r.length&&s.expandPool(),b.type=a,r.pop()._set(b)},release:function(a){a._reset(),r.push(a)}},t={NORMAL:1,MOVING:2,FIXED:3,STABLE:4},u=function(a){this.position=h.vector.create(a.x,a.y),this.velocity=h.vector.create(),this.acceleration=h.vector.create(),this.prevPosition=h.vector.create(),this.angularVelocity=0,this.cof=a.cof||0,this.cor=a.cor||0,this.mass=a.mass||0,this.angle=a.angle||0,this.type=a.type,this.width=a.width,this.height=a.height,this.radius=a.radius,this.color=a.color,this.aabb=new h.AABB,this.status=t.NORMAL,this.world=b,this.uuid=-1,this.externalForce=[]};u.prototype.move=function(a){return h.vector.release(this.prevPosition),this.prevPosition=this.position,this.position=a,this._updateAABB(),this},u.prototype["do"]=function(){var a,b,c=this.world.behaviors,d=0,e=c.length,f=h.vector.create();if(0===e)return this;for(d=0;e>d;d++)a=c[d],b=a.behave(this),b&&(f.add(b),h.vector.release(b));return f},u.prototype.applyForce=function(a){return this.externalForce.push(a),this},u.prototype.accelerate=function(a){return this.acceleration.add(a.scale(this.world.ratio)),h.vector.release(a),this},u.prototype.step=function(a){if(this.status===t.NORMAL){var b,c=h.vector.create(),d=h.vector.copy(this.velocity),e=0,f=this.acceleration,g=h.vector.copy(this.acceleration);if(this.externalForce.length>0)for(e=0;e<this.externalForce.length;e++)b=this.externalForce.pop(),c.add(b),h.vector.release(b);return this.prevPosition.set(this.position),this.position.add(d.scale(a)).add(g.scale(a*a/2)),this.acceleration=c.scale(1/this.mass).scale(this.world.ratio),this.velocity.add(f.add(this.acceleration).scale(a)),this.angle+=this.angularVelocity*a,h.vector.releaseAll([d,f,g]),this._updateAABB(),this}},u.prototype._adjustPosition=function(){var a=this.position.x,b=this.position.y,c=this.radius||this.width/2,d=this.radius||this.height/2;return 0===this.velocity.magnitude()?this.position:(a+c>this.world.width&&(this.position.x=Math.floor(this.world.width-c)),a-(this.radius||this.width/2)<0&&(this.position.x=Math.ceil(c)),b+d>this.world.height&&(this.position.y=this.world.height-d),this.position.y-d<0&&(this.position.y=d),this)},u.prototype.contains=function(a,b){return"rectangle"===this.type?a<=this.position.x+this.width/2&&a>=this.position.x-this.width/2&&b<=this.position.y+this.height/2&&b>=this.position.y-this.height/2:"circle"===this.type?Math.pow(a-this.position.x,2)+Math.pow(b-this.position.y,2)<=Math.pow(this.radius,2):void 0},u.prototype._updateAABB=function(){if("circle"===this.type&&this.aabb.set(this.position.x-this.radius,this.position.y-this.radius,2*this.radius,2*this.radius),"rectangle"===this.type){var a,b,c,d,e=this.position.clone(),f=e.clone().add({x:-this.width/2,y:-this.height/2}).sub(e),g=e.clone().add({x:+this.width/2,y:-this.height/2}).sub(e),i=e.clone().add({x:-this.width/2,y:this.height/2}).sub(e),j=e.clone().add({x:+this.width/2,y:this.height/2}).sub(e),k=Math.PI/180,l=this.angle%(360*k);90*k>=l?(a=f.rotate(this.angle),b=i.rotate(this.angle),c=j.rotate(this.angle),d=g.rotate(this.angle)):180*k>=l?(a=i.rotate(this.angle),b=j.rotate(this.angle),c=g.rotate(this.angle),d=f.rotate(this.angle)):270*k>=l?(a=j.rotate(this.angle),b=g.rotate(this.angle),c=f.rotate(this.angle),d=i.rotate(this.angle)):(a=g.rotate(this.angle),b=f.rotate(this.angle),c=i.rotate(this.angle),d=j.rotate(this.angle)),a.add(e),b.add(e),c.add(e),d.add(e),this.aabb.set(b.x,a.y,d.x-b.x,c.y-a.y),h.vector.releaseAll([f,g,i,j,e])}},u.prototype.setStatus=function(a){return this.status=t[a],this},u.prototype._set=function(a){return this.position.set(a.x,a.y),this.velocity.set(a.vx,a.vy),this.angularVelocity=a.angularVelocity||this.angularVelocity,this.cof=a.cof||this.cof,this.cor=a.cor||this.cor,this.mass=a.mass||this.mass,this.angle=a.angle||this.angle,this.type=a.type,this.width=a.width,this.height=a.height,this.radius=a.radius,this.color=a.color,this._updateAABB(),this},u.prototype._reset=function(){return this.position.reset(),this.velocity.reset(),this.acceleration.reset(),this.prevPosition.reset(),this.angularVelocity=0,this.cof=0,this.cor=0,this.mass=0,this.angle=0,this.type="",this.width=0,this.height=0,this.radius=0,this.color="fff",this.uuid=-1,this},u.prototype.isChanged=function(){return!this.position.isEqual(this.prevPosition)},h.body=s,h.body.initPool();var v=function(a){this.root=new w(0,a),this.bound=a};v.prototype.insert=function(a){this.root.insert(a)},v.prototype.retrieve=function(a){return this.root.retrieve(a)},v.prototype.clear=function(){this.root.clear()};var w=function(a,b){this.max_objects=10,this.max_level=5,this.bodies=[],this.children=[],this.residue=[],this.aabb=b||new h.AABB,this.level=a};w.TOP_LEFT=0,w.TOP_RIGHT=1,w.BOTTOM_RIGHT=2,w.BOTTOM_LEFT=3,w.prototype.split=function(){var a=this.aabb.width/2,b=this.aabb.height/2,c=this.aabb.x,d=this.aabb.y;this.children[0]=x.allocate(this.level+1,c,d,a,b),this.children[1]=x.allocate(this.level+1,c+a,d,a,b),this.children[2]=x.allocate(this.level+1,c+a,d+b,a,b),this.children[3]=x.allocate(this.level+1,c,d+b,a,b)},w.prototype.findIndex=function(a){if(a){var b=a.position.y<this.aabb.y+this.aabb.height/2,c=!b,d=a.position.x<this.aabb.x+this.aabb.width/2,e=!d;return b&&d?w.TOP_LEFT:b&&e?w.TOP_RIGHT:c&&d?w.BOTTOM_LEFT:c&&e?w.BOTTOM_RIGHT:void 0}},w.prototype.insert=function(a){if(this.bodies.length<=this.max_objects&&0===this.children.length)return void this.bodies.push(a);var b,c,d;if(this.bodies.length>this.max_objects)for(this.bodies.push(a),this.split(),c=0,d=this.bodies.length,c=0;d>c;c++)a=this.bodies.pop(),b=this.findIndex(a),this.children[b].insert(a);else if(this.children.length>0){b=this.findIndex(a);var e=this.children[b];e.aabb.contains(a.aabb)?e.insert(a):this.residue.push(a)}},w.prototype.retrieve=function(a){var b=this.findIndex(a),c=[];return this.children.length>0&&b>=0&&(this.children[b].aabb.contains(a.aabb)?Array.prototype.push.apply(c,this.children[b].retrieve(a)):(a.aabb.x<=this.children[w.TOP_RIGHT].aabb.x&&(a.aabb.y<=this.children[w.BOTTOM_LEFT].aabb.y&&Array.prototype.push.apply(c,this.children[w.TOP_LEFT].retrieve(a)),a.aabb.y+a.aabb.height>this.children[w.BOTTOM_LEFT].aabb.y&&Array.prototype.push.apply(c,this.children[w.BOTTOM_LEFT].retrieve(a))),a.aabb.x+a.aabb.width>this.children[w.TOP_RIGHT].aabb.x&&(a.aabb.y<=this.children[w.BOTTOM_RIGHT].aabb.y&&Array.prototype.push.apply(c,this.children[w.TOP_RIGHT].retrieve(a)),a.aabb.y+a.aabb.height>this.children[w.BOTTOM_RIGHT].aabb.y&&Array.prototype.push.apply(c,this.children[w.BOTTOM_RIGHT].retrieve(a))))),Array.prototype.push.apply(c,this.bodies),Array.prototype.push.apply(c,this.residue),c},w.prototype.clear=function(){this.bodies=[],this.residue=[],this.children.length>0&&(this.children[0].clear(),this.children[1].clear(),this.children[2].clear(),this.children[3].clear(),x.release(this.children[0]),x.release(this.children[1]),x.release(this.children[2]),x.release(this.children[3]),this.children=[])};var x={},y=a.nodecnt=0;x.pool=[],x.size=16,x.allocate=function(a,b,c,d,e){0===x.pool.length&&x.expand();var f=x.pool.pop();return f.aabb.set(b,c,d,e),f.level=a,y++,f},x.expand=function(){for(var a=0;a<x.size;a++)x.pool.push(new w(-1))},x.release=function(a){y--,x.pool.push(a)},h.Quadtree=v;var z=function(a){return"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument},A=function(c){var d,f=document.body;"string"==typeof c?d=document.getElementById(c):z(c)&&(d=c),d&&"canvas"===d.tagName?this.el=d:d&&(f=d),this.width=this.el&&this.el.width||a.innerWidth,this.height=this.el&&this.el.height||a.innerHeight,this.el===b&&(this.el=document.createElement("canvas"),this.el.width=this.width,this.el.height=this.height,f.appendChild(this.el)),this.el.style.transform="translate3d(0,0,0)",this.el.style["-webkit-transform"]="translate3d(0,0,0)",this.ctx=this.el.getContext("2d"),this.on(e,function(a){a.preventDefault()})};A.prototype.draw=function(a){var b,c=a.length;for(this.ctx.strokeStyle="#000",this.ctx.lineWidth=1,this.ctx.clearRect(0,0,this.width,this.height),b=0;c>b;b++)this._drawBody(a[b])},A.prototype._drawBody=function(a){var b=a.position,c=a.width,d=a.height,e=a.radius,f=Math.round(b.x),g=Math.round(b.y);this.ctx.save(),this.ctx.translate(f,g),this.ctx.rotate(a.angle),this.ctx.beginPath(),"rectangle"===a.type?this.ctx.rect(Math.round(-c/2),Math.round(-d/2),c,d):"circle"===a.type&&this.ctx.arc(0,0,e,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fillStyle=a.color,this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(0,-(e||d/2)),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},A.prototype.drawQuadtree=function(a){var b=a.root||a,c=b.aabb;b.children.length>0&&(this.drawQuadtree(b.children[0]),this.drawQuadtree(b.children[1]),this.drawQuadtree(b.children[2]),this.drawQuadtree(b.children[3])),this.ctx.rect(c.x,c.y,c.width,c.height),this.ctx.stroke()},A.prototype._clearBody=function(a){if(this._isInCanvas(a))if("rectangle"===a.type){var b=a.width,c=a.height;this.ctx.clearRect(a.prevPosition.x-b/2*1.1,a.prevPosition.y-c/2*1.1,1.1*b,1.1*c)}else if("circle"===a.type){var d=a.radius;this.ctx.clearRect(a.prevPosition.x-1.1*d,a.prevPosition.y-1.1*d,2.1*d,2.1*d)}},A.prototype._isInCanvas=function(a){return"rectangle"===a.type?this.width>=a.position.x+a.width/2&&this.height>=a.position.y+a.height/2:"circle"===a.type?this.width>=a.position.x+a.radius/2&&this.height>=a.position.y+a.radius/2:void 0},A.prototype.on=function(a,b){this.el.addEventListener(a,b)},A.prototype.off=function(a,b){this.el.removeEventListener(a,b)};var B={canvas:function(a){return new A(a)}};h.renderer=B;var C=function(){this.bodies=[],this.behaviors=[],this.renderer=b,this.paused=!0,this.ratio=100,this.width=600,this.height=500,this.movingBody=null,this.lastStep=0,this.lastMove=0,this.uuid=0,this.quadtree=new h.Quadtree(new h.AABB(0,0,0,0)),this.onMove=this._onMove.bind(this),this.onEnd=this._onEnd.bind(this)};C.prototype.init=function(){},C.prototype.start=function(){this.paused&&(this.lastStep=g(),raf(this._step.bind(this)),this.paused=!1)},C.prototype._step=function(){var a,b,c=g(),d=(c-this.lastStep)/1e3;for(this.lastStep=c,a=0;a<this.behaviors.length;a++)for(var e=0;e<this.bodies.length;e++)b=this.bodies[e],this.behaviors[a].behave(b);for(this.quadtree.clear(),a=0;a<this.bodies.length;a++)b=this.bodies[a],b.step(d),this.quadtree.insert(b);this.renderer&&this.renderer.draw(this.bodies),this.paused||raf(this._step.bind(this))},C.prototype.add=function(a){a.world=this,a.uuid=this.uuid++,this.bodies.push(a),this.quadtree.insert(a)},C.prototype.apply=function(a){this.behaviors.push(a)},C.prototype.setRenderer=function(a){this.renderer=a,this.width=this.renderer.width,this.height=this.renderer.height,this.renderer.on(d,this._onClick.bind(this)),this.quadtree.bound.set(0,0,this.width,this.height)},C.prototype.pause=function(){this.paused=!0},C.prototype.resume=function(){this.start()},C.prototype._onClick=function(a){var b,c,d=this.renderer.el.getBoundingClientRect(),g=a.pageX||a.touches[0].pageX-d.left,h=a.pageY||a.touches[0].pageY-d.top;if(!this.paused)for(c=this.bodies.length-1;c>=0;c--)if(b=this.bodies[c],b.contains(g,h))return b.setStatus("MOVING"),b.angularVelocity=0,this.movingBody=b,this.renderer.on(e,this.onMove),void this.renderer.on(f,this.onEnd)},C.prototype._onMove=function(a){var b,d=this.renderer.el.getBoundingClientRect(),e=c?a.touches[0].pageX-d.left:a.pageX,f=c?a.touches[0].pageY-d.top:a.pageY,i=g(),j=i-this.lastMove,k=this.movingBody;return a.preventDefault(),a.stopPropagation(),k&&this._isMovable(k,e,f)?(k.prevPosition.set(e,f),k.move(h.vector.create(e,f)),b=h.vector.copy(k.position).sub(k.prevPosition).scale(1e3/j),h.vector.release(k.velocity),k.velocity=b,void(this.lastMove=i)):void(this.lastMove=0)},C.prototype._isMovable=function(a,b,c){var d=a.radius||a.width/2,e=a.radius||a.height/2,f=this.renderer.el.getBoundingClientRect();return b+d>=f.left+f.width?!1:b-d<=f.left?!1:c+e>=f.top+f.height?!1:c-e<=f.top?!1:!0},C.prototype._onEnd=function(){g()-this.lastMove>300&&this.movingBody.velocity.reset(),this.movingBody.setStatus("NORMAL"),this.movingBody=null,this.renderer.off(e,this.onMove),this.renderer.off(f,this.onEnd)},h.world=C}(window);